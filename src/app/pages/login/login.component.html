<ion-content>
  <ion-loading #ionLoading spinner="circles"></ion-loading>
  <div id="container">
    <div id="header">
      <img src="assets/icon/E-nvit.jpg" />
      <ion-text class="mat-display-medium">B - E n v i t</ion-text>
    </div>
    <form
      (ngSubmit)="signUserIn($event)"
      [formGroup]="loginForm"
      id="form"
      class="d-flex flex-column"
    >
      <div class="d-flex flex-column w-100">
        <ion-text class="mat-body-small fw-bold">
          {{ "loginPage.loginForm.labels.mobileNumber" | translate }}
        </ion-text>
        <mat-form-field appearance="outline" class="w-100">
          <span matTextPrefix>+255 &nbsp;</span>
          <input
            matInput
            type="tel"
            placeholder="Enter Mobile"
            [formControl]="mobile_number"
            name="mobile_number"
            autocomplete="off"
          />
          <mat-error>
            <ng-container *ngIf="mobile_number.hasError('required')">
              {{ "defaults.errors.pleaseFill" | translate }}
            </ng-container>
            <ng-container *ngIf="mobile_number.hasError('pattern')">
              {{ "loginPage.loginForm.errors.invalidPhoneNumber" | translate }}
            </ng-container>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="d-flex flex-column d-flex">
        <ion-text class="mat-body-small fw-bold">
          {{ "loginPage.loginForm.labels.password" | translate }}
        </ion-text>
        <mat-form-field appearance="outline" style="width: 100%">
          <mat-icon svgIcon="lock" matPrefix></mat-icon>
          <input
            #passwordInput
            matInput
            placeholder="Enter Password"
            type="password"
            [formControl]="password"
            name="password"
            autocomplete="off"
            (paste)="$event.preventDefault()"
            (copy)="$event.preventDefault()"
            (cut)="$event.preventDefault()"
          />
          @if (password.value.length > 0) {
          <button
            [@inOutAnimation]
            matSuffix
            mat-icon-button
            type="button"
            (click)="
              passwordInput.type === 'password'
                ? (passwordInput.type = 'text')
                : (passwordInput.type = 'password')
            "
          >
            <mat-icon
              [svgIcon]="passwordInput.type === 'password' ? 'eye' : 'eye-off'"
              matPrefix
              class="!text-black"
            ></mat-icon>
          </button>
          }
          <mat-error>
            {{ "defaults.errors.pleaseFill" | translate }}
          </mat-error>
        </mat-form-field>
      </div>
      <div class="d-flex align-items-center justify-content-end">
        <button
          (click)="resetPage()"
          mat-button
          type="button"
          color="primary"
          class="link-href"
        >
          {{ "loginPage.forgotPassword" | translate }}
        </button>
      </div>
      <ion-button type="ngSubmit" form="form" expand="block" class="w-100 mt-3">
        {{ "loginPage.loginButtonText" | translate }}
      </ion-button>
    </form>

    <div class="w-full mt-8 grid place-items-center">
      <img src="assets/icon/Biz-Logic.png" class="w-40" />
    </div>
  </div>
</ion-content>
